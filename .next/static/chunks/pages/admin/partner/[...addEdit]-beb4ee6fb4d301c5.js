(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{8541:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/partner/[...addEdit]",function(){return n(7809)}])},8545:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5893),a=n(7294),i=n(5675),l=n.n(i),s=n(7414),o=n(3230),u=n(6527),c=n(9003),d={src:"/_next/static/media/pdf-icon.b1c4466b.jpeg",height:640,width:640,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAfEAACAAUFAAAAAAAAAAAAAAAAEQECAxIxBBUhQVH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8Aol2v3tqeFC7CmUel4ly8AAD/2Q==",blurWidth:8,blurHeight:8},p=function(e){let{name:t,value:n,accept:i,placeholder:p,onChange:A}=e,[m,v]=(0,a.useState)(void 0),h=a.useRef(null),g=e=>{let t=e.target.name,n=e.target.value,r=e.target.files;if(!r||(null==r?void 0:r.length)===0)return;let a=r[0];if(!a.type.includes("image/")&&!a.type.includes("application/pdf")){h.current&&(h.current.value="");return}(null==a?void 0:a.type)==="application/pdf"?v(a):v(void 0),null==A||A(a,{name:t,value:n})};return(0,r.jsxs)(a.Fragment,{children:[n||m?(0,r.jsxs)("div",{className:"relative",children:[m&&void 0!==m?(0,r.jsx)("div",{onClick:()=>{let e=document.createElement("a");e.href=URL.createObjectURL(m||new Blob),e.target="_blank",e.download="".concat(t,".pdf"),e.click()},children:(0,r.jsx)(l(),{className:"img-fluid flex ",src:m?d:"",alt:"Test",width:200,height:150})}):(0,r.jsx)(l(),{className:"img-fluid flex",src:n instanceof Blob?URL.createObjectURL(n):"".concat("https://has.chicodeapi.xyz","/").concat(n),alt:"Test",width:200,height:150}),(0,r.jsxs)("div",{className:"absolute top-3 flex justify-between",style:{width:"200px"},children:[(0,r.jsx)(s.Ei,{className:"mr-2",title:"Ubah Gambar",onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},children:(0,r.jsx)(u.Z,{color:"blue",size:4})}),(0,r.jsx)(s.Ei,{title:"Hapus Gambar",onClick:()=>{var e;null==A||A(null,{name:null===(e=h.current)||void 0===e?void 0:e.name,value:""}),v(void 0)},children:(0,r.jsx)(c.Z,{color:"red",size:4})})]})]}):(0,r.jsx)(s.UP,{className:"cursor-default",iconRight:(0,r.jsx)(o.Z,{}),onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},readOnly:!0,name:t,placeholder:p}),(0,r.jsx)("input",{name:t,ref:h,type:"file",onChange:e=>{g(e)},hidden:!0,accept:i,multiple:!0})]})}},1951:function(e,t,n){"use strict";n.d(t,{vt:function(){return j},FU:function(){return A},P$:function(){return f},mG:function(){return S},i4:function(){return y},_r:function(){return u},bn:function(){return o},lM:function(){return m},Qy:function(){return F},rr:function(){return x},ef:function(){return c},IL:function(){return v},Lt:function(){return k},rP:function(){return b},$U:function(){return d},K6:function(){return h},Nm:function(){return E},hl:function(){return w},a6:function(){return p},UJ:function(){return g},gy:function(){return D}});var r=n(5121),a=n(3299),i=(()=>{let e=r.Z.create({baseURL:"https://has.chicodeapi.xyz"});return e.interceptors.request.use(async e=>{let t=await (0,a.getSession)();if(t){let n=t.user.apiToken;e.headers.Authorization="Bearer ".concat(n)}return e}),e.interceptors.response.use(e=>e,e=>{if(r.Z.isAxiosError(e)){var t;null===(t=e.response)||void 0===t||t.status}throw e}),e})(),l=n(7848),s=n(8228);let o=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllPartnerCategories",t],queryFn:async()=>{let{data:e}=await i.get("/v1/partner_categories/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},u=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllPartner",t],queryFn:async()=>{let{data:e}=await i.get("/v1/partner/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},c=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOnePartner",t],queryFn:async()=>{let{data:e}=await i.get("/v1/partner/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},d=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/partner/create",e);return t},onSuccess:t,onError:n})},p=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/partner/update/".concat(t),n);return r},onSuccess:t,onError:n})},A=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/partner/delete/".concat(e));return t},onSuccess:t,onError:n})},m=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllPublication",t],queryFn:async()=>{let{data:e}=await i.get("/v1/publications/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},v=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOnePublication",t],queryFn:async()=>{let{data:e}=await i.get("/v1/publications/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},h=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/publications/create",e);return t},onSuccess:t,onError:n})},g=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/publications/update/".concat(t),n);return r},onSuccess:t,onError:n})},f=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/publications/delete/".concat(e));return t},onSuccess:t,onError:n})},y=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllMainServices",t],queryFn:async()=>{let{data:e}=await i.get("/v1/main_services/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},x=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOneMainServices",t],queryFn:async()=>{let{data:e}=await i.get("/v1/main_services/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},b=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/main_services/create",e);return t},onSuccess:t,onError:n})},w=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/main_services/update/".concat(t),n);return r},onSuccess:t,onError:n})},j=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/main_services/delete/".concat(e));return t},onSuccess:t,onError:n})},F=e=>{let{id:t,params:n,onSuccess:r,onError:a}=e;return(0,l.a)({queryKey:["ApiGetAllServices",n],queryFn:async()=>{let{data:e}=await i.get("/v1/services/getall/".concat(t),{params:n});return e},keepPreviousData:!0,retry:3,onSuccess:r,onError:a})},k=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOneServices",t],queryFn:async()=>{let{data:e}=await i.get("/v1/services/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},E=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/services/create",e);return t},onSuccess:t,onError:n})},D=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/services/update/".concat(t),n);return r},onSuccess:t,onError:n})},S=e=>{let{onSuccess:t,onError:n}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/services/delete/".concat(e));return t},onSuccess:t,onError:n})}},7809:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(5893),a=n(7294),i=n(9008),l=n.n(i),s=n(3299),o=n(5121),u=n(2175),c=n(2783),d=n(48),p=n(1580),A=n(4398),m=n(1032),v=n(9488),h=n(1951),g=n(7414),f=n(8545),y=n(9041);n(6973);var x=n(5490),b=n(5152),w=n.n(b);let j=w()(()=>n.e(925).then(n.t.bind(n,9521,23)).then(e=>e.Editor),{ssr:!1});var F=function(){let{slug:e,NextRouter:t}=(0,m.Z)();(0,v.Z)();let n=e[0],i=e[1],[l,s]=(0,a.useState)(!1),[b,w]=(0,a.useState)([{value:0,label:""}]),F=(0,u.TA)({initialValues:{name:"",photo:"",categories:"",description:"",image:"",categories_id:0},onSubmit:async e=>{if(/\d/.test(e.name)){alert("Nama Partner Hanya boleh huruf");return}await _(e)}}),[k,E]=(0,a.useState)(()=>{var e;let t=(null==F?void 0:null===(e=F.values)||void 0===e?void 0:e.description)||"",n=(0,y.convertFromHTML)(t).contentBlocks,r=y.ContentState.createFromBlockArray(n);return y.EditorState.createWithContent(r)}),D=(e,t)=>{F.setFieldValue(t,e)},S=e=>{if(!e){D("","photo");return}if(!["image/jpeg","image/png","application/pdf"].includes(e.type)){console.error("Invalid file type. Please select a valid image file.");return}D(e,"photo")};(0,h.bn)({params:{page:1},onSuccess(e){let{data:t}=e,n=[];t.map(e=>{n.push({value:null==e?void 0:e.id,label:null==e?void 0:e.name})}),w(n)},onError(e){console.error(e)}});let N=(0,h.ef)({id:i,onSuccess(e){let{data:t}=e;F.setValues({...F.values,name:t.name,photo:null==t?void 0:t.image,image:null==t?void 0:t.image,description:null==t?void 0:t.description,categories:null==t?void 0:t.categories,categories_id:null==t?void 0:t.categories_id});let n=(null==t?void 0:t.description)||"",r=(0,y.convertFromHTML)(n).contentBlocks,a=y.ContentState.createFromBlockArray(r);E(y.EditorState.createWithContent(a))},onError(e){console.error(e)}});a.useEffect(()=>{"edit"===n&&N.refetch()},[i,n]);let C=(0,h.$U)({onSuccess(){alert("Berhasil menambah Data"),t.replace("/admin/partner"),F.setSubmitting(!1),s(!1)},onError(e){if(F.setSubmitting(!1),s(!1),o.Z.isAxiosError(e)){var t,n;let r=null===(t=e.response)||void 0===t?void 0:t.status;422===r?alert(null===(n=e.response)||void 0===n?void 0:n.data.message):alert("Telah terjadi kesalahan saat Menambah Data.")}console.error(e)}}),P=(0,h.a6)({onSuccess(){alert("Berhasil mengubah Data Partner"),t.replace("/admin/partner"),F.setSubmitting(!1),s(!1)},onError(e){if(F.setSubmitting(!1),s(!1),o.Z.isAxiosError(e)){var t,n;let r=null===(t=e.response)||void 0===t?void 0:t.status;422===r?alert(null===(n=e.response)||void 0===n?void 0:n.data.message):alert("Telah terjadi kesalahan saat Mengubah Data.")}console.error(e)}}),_=async e=>{F.setSubmitting(!0),s(!0);let t=new FormData;Object.keys(e).map(n=>{(null==e?void 0:e[n])!=null&&"categories_id"!==n&&"image"!=n&&t.set(n,null==e?void 0:e[n])}),"add"===n?C.mutate(t):P.mutate({id:i,payload:t})};return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,r.jsx)(c.Z,{item:[{title:"Kelola Partner",linkTo:"/admin/partner"},{title:"add"===n?"Tambah Partner":"Edit Partner",active:!0}],className:"ml-4"})}),(0,r.jsx)("div",{className:"h-full w-full md:mx-4",style:{overflow:"scroll"},children:(0,r.jsxs)("form",{className:"flex w-full flex-col gap-4",onSubmit:F.handleSubmit,children:[(0,r.jsxs)("div",{className:"w-6/12",children:[(0,r.jsxs)(A.Z,{htmlFor:"noTelp",children:["Pilih Kategori\xa0",(0,r.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,r.jsx)(g.JD,{name:"package_id",placeholder:"Pilih Paket",value:F.values.categories_id,option:b,onChange:e=>{F.setFieldValue("categories_id",null==e?void 0:e.value),F.setFieldValue("categories",null==e?void 0:e.label)},required:!0})]}),(0,r.jsxs)("div",{className:"w-6/12",children:[(0,r.jsxs)(A.Z,{htmlFor:"nama",children:["Nama\xa0",(0,r.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,r.jsx)(p.Z,{type:"text",name:"name",placeholder:"Nama",onChange:F.handleChange,value:F.values.name,requiredMessages:"Nama tidak boleh kosong!",required:!0})]}),(0,r.jsxs)("div",{className:"w-6/12",children:[(0,r.jsxs)(A.Z,{htmlFor:"noTelp",children:["Upload Foto\xa0",(0,r.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,r.jsx)(f.Z,{name:"photo",placeholder:"Upload",value:F.values.photo,accept:"image/*",onChange:e=>S(e),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(A.Z,{htmlFor:"noTelp",children:["Deskripsi\xa0",(0,r.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,r.jsx)(j,{editorState:k,onEditorStateChange:e=>{E(e);let t=e.getCurrentContent(),n=(0,x.E)(t);F.setFieldValue("description",n)},toolbar:{options:["inline","blockType","list","textAlign","history"],inline:{options:["bold","italic","underline","strikethrough"]},blockType:{options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote"]},list:{options:["unordered","ordered"]}},wrapperStyle:{backgroundColor:"white",maxHeight:300,overflow:"scroll"}})]}),(0,r.jsx)("div",{className:"flex w-full md:flex",children:(0,r.jsx)(d.Z,{type:"submit",disabled:l,children:l?"Menyimpan...":"Simpan"})})]})})]})},k=function(){let{NextRouter:e}=(0,m.Z)(),{data:t,status:n}=(0,s.useSession)();return"loading"===n?null:"unauthenticated"===n?(e.replace("/login"),null):"authenticated"===n&&(null==t?void 0:t.user.role)!=="admin"?(e.replace("/karyawan"),null):(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Has Law | Partner"}),(0,r.jsx)("meta",{name:"description",content:"Has Law | Partner"})]}),(0,r.jsx)(F,{})]})}}},function(e){e.O(0,[957,641,175,979,53,774,888,179],function(){return e(e.s=8541)}),_N_E=e.O()}]);