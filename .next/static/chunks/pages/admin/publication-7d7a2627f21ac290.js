(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{1258:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/publication",function(){return n(1613)}])},3322:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=function(e){let{color:t="default",size:n=4}=e;return(0,r.jsx)("svg",{className:"h-".concat(n," w-").concat(n," ").concat("default"===t&&"text-inherit"," ").concat("red"===t&&"text-ui-red"," ").concat("blue"===t&&"text-ui-blue"),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 96 960 960",width:"24","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M432 624v112q0 20.4 13.8 34.2Q459.6 784 480 784q20.4 0 34.2-13.8Q528 756.4 528 736V624h112q20.4 0 34.2-13.8Q688 596.4 688 576q0-20.4-13.8-34.2Q660.4 528 640 528H528V416q0-20.4-13.8-34.2Q500.4 368 480 368q-20.4 0-34.2 13.8Q432 395.6 432 416v112H320q-20.4 0-34.2 13.8Q272 555.6 272 576q0 20.4 13.8 34.2Q299.6 624 320 624h112Zm48 386q-91 0-169.987-34.084-78.988-34.083-137.417-92.512T80.084 745.987Q46 667 46 576t34.084-169.987q34.083-78.988 92.512-137.417t137.417-92.512Q389 142 480 142t169.987 34.084q78.988 34.083 137.417 92.512t92.512 137.417Q914 485 914 576t-34.084 169.987q-34.083 78.988-92.512 137.417t-137.417 92.512Q571 1010 480 1010Zm0-126q130 0 219-89t89-219q0-130-89-219t-219-89q-130 0-219 89t-89 219q0 130 89 219t219 89Zm0-308Z"})})}},2633:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=function(e){let{color:t="default",size:n=4}=e;return(0,r.jsx)("svg",{className:"h-".concat(n," w-").concat(n," ").concat("default"===t&&"text-inherit"," ").concat("red"===t&&"text-ui-red"," ").concat("blue"===t&&"text-ui-blue"," ").concat(t),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M212-86q-53 0-89.5-36.5T86-212v-536q0-53 36.5-89.5T212-874h268v126H212v536h536v-268h126v268q0 53-36.5 89.5T748-86H212Zm207-246-87-87 329-329H560v-126h314v314H748v-101L419-332Z"})})}},3234:function(e,t,n){"use strict";var r=n(5893),a=n(7294),i=n(3600),l=n(9049),c=n(2335),s=n(9527);t.Z=function(e){var t,n;let{open:u,maskClosable:o=!0,onOk:d,onCancel:v,data:f}=e,[p,h]=(0,a.useState)(0);return(0,r.jsxs)(a.Fragment,{children:[u&&(0,r.jsx)("div",{className:"fixed inset-0 z-20 m-8 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none md:m-0",children:(0,r.jsx)("div",{className:"relative mx-auto my-6 w-auto max-w-md",children:(0,r.jsx)("div",{className:"relative flex flex-col gap-4 rounded-lg border-0 bg-white align-middle shadow-lg outline-none focus:outline-none",style:{minWidth:500},children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,r.jsx)("div",{className:"flex w-full justify-end",children:(0,r.jsx)("div",{className:"cursor-pointer",onClick:v,children:(0,r.jsx)(c.Z,{})})}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between",children:["string"!=typeof f&&(0,r.jsx)("div",{className:"cursor-pointer",onClick:e=>{0!==p?h(p-1):null==e||e.preventDefault()},children:(0,r.jsx)(l.Z,{})}),(0,r.jsx)("div",{className:"flex items-center justify-center p-4",children:"string"==typeof f?(0,r.jsx)("img",{className:"contain flex ",style:{maxHeight:300},src:f?"".concat("https://has.chicodeapi.xyz","/").concat(f):f}):(0,r.jsx)("img",{className:"contain flex ",style:{maxHeight:300},src:f?"".concat("https://has.chicodeapi.xyz","/").concat(null==f?void 0:null===(t=f[p])||void 0===t?void 0:t.image):null==f?void 0:null===(n=f[p])||void 0===n?void 0:n.image})}),"string"!=typeof f&&(0,r.jsx)("div",{className:"cursor-pointer",onClick:e=>{p<(null==f?void 0:f.length)-1?h(p+1):null==e||e.preventDefault()},children:(0,r.jsx)(s.Z,{})})]})]})})})}),(0,r.jsx)(i.Z,{active:u,onClick:v})]})}},2291:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e,t){let[n,a]=r.useState(e);return r.useEffect(()=>{let n=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(n)}},[e,t]),n}},1951:function(e,t,n){"use strict";n.d(t,{vt:function(){return b},FU:function(){return f},P$:function(){return y},mG:function(){return F},i4:function(){return g},_r:function(){return u},bn:function(){return s},lM:function(){return p},Qy:function(){return Z},rr:function(){return w},ef:function(){return o},IL:function(){return h},Lt:function(){return N},rP:function(){return j},$U:function(){return d},K6:function(){return m},Nm:function(){return D},hl:function(){return q},a6:function(){return v},UJ:function(){return x},gy:function(){return P}});var r=n(5121),a=n(3299),i=(()=>{let e=r.Z.create({baseURL:"https://has.chicodeapi.xyz"});return e.interceptors.request.use(async e=>{let t=await (0,a.getSession)();if(t){let n=t.user.apiToken;e.headers.Authorization="Bearer ".concat(n)}return e}),e.interceptors.response.use(e=>e,e=>{if(r.Z.isAxiosError(e)){var t;null===(t=e.response)||void 0===t||t.status}throw e}),e})(),l=n(7848),c=n(8228);let s=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllPartnerCategories",t],queryFn:async()=>{let{data:e}=await i.get("/v1/partner_categories/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},u=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllPartner",t],queryFn:async()=>{let{data:e}=await i.get("/v1/partner/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},o=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOnePartner",t],queryFn:async()=>{let{data:e}=await i.get("/v1/partner/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},d=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/partner/create",e);return t},onSuccess:t,onError:n})},v=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/partner/update/".concat(t),n);return r},onSuccess:t,onError:n})},f=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/partner/delete/".concat(e));return t},onSuccess:t,onError:n})},p=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllPublication",t],queryFn:async()=>{let{data:e}=await i.get("/v1/publications/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},h=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOnePublication",t],queryFn:async()=>{let{data:e}=await i.get("/v1/publications/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},m=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/publications/create",e);return t},onSuccess:t,onError:n})},x=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/publications/update/".concat(t),n);return r},onSuccess:t,onError:n})},y=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/publications/delete/".concat(e));return t},onSuccess:t,onError:n})},g=e=>{let{params:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetAllMainServices",t],queryFn:async()=>{let{data:e}=await i.get("/v1/main_services/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:n,onError:r})},w=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOneMainServices",t],queryFn:async()=>{let{data:e}=await i.get("/v1/main_services/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},j=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/main_services/create",e);return t},onSuccess:t,onError:n})},q=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/main_services/update/".concat(t),n);return r},onSuccess:t,onError:n})},b=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/main_services/delete/".concat(e));return t},onSuccess:t,onError:n})},Z=e=>{let{id:t,params:n,onSuccess:r,onError:a}=e;return(0,l.a)({queryKey:["ApiGetAllServices",n],queryFn:async()=>{let{data:e}=await i.get("/v1/services/getall/".concat(t),{params:n});return e},keepPreviousData:!0,retry:3,onSuccess:r,onError:a})},N=e=>{let{id:t,onSuccess:n,onError:r}=e;return(0,l.a)({queryKey:["ApiGetOneServices",t],queryFn:async()=>{let{data:e}=await i.get("/v1/services/getdetail/".concat(t));return e},enabled:!1,onSuccess:n,onError:r})},D=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.post("/v1/services/create",e);return t},onSuccess:t,onError:n})},P=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{id:t,payload:n}=e,{data:r}=await i.put("/v1/services/update/".concat(t),n);return r},onSuccess:t,onError:n})},F=e=>{let{onSuccess:t,onError:n}=e;return(0,c.D)({mutationFn:async e=>{let{data:t}=await i.delete("/v1/services/delete/".concat(e));return t},onSuccess:t,onError:n})}},2637:function(e,t,n){"use strict";function r(e,t){let n=[];for(let[r,a]of Object.entries(e)){let e=(t.page*t.size-(t.size-1)+Number(r)).toString();n.push({index:e,..."object"==typeof a?a:{}})}return n}n.d(t,{Z:function(){return r}})},1613:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(5893),a=n(7294),i=n(9008),l=n.n(i),c=n(3299),s=n(1664),u=n.n(s),o=n(48),d=n(11),v=n(9227),f=n(3408),p=n(6696),h=n(4681),m=n(3322),x=n(6527),y=n(9003),g=n(9488),w=n(2291),j=n(1951),q=n(2637),b=n(381),Z=n.n(b),N=n(2633),D=n(3234),P=function(){let e=(0,g.Z)(),[t,n]=a.useState({field:"",current:""}),[i,l]=a.useState({open:!1,selectedId:null}),[c,s]=a.useState({open:!1,image:""}),[b,P]=a.useState([]),[F,k]=a.useState({page:1,size:7,totalData:0,totalPage:0});(0,j.lM)({params:{page:1,pagesize:100,search:t.current,categories:"All"},onSuccess(e){let{data:t}=e,n=(0,q.Z)(t,F);P(n)},onError(e){console.error(e)}});let _=(0,j.P$)({onSuccess(){l({open:!1,selectedId:null}),alert("Berhasil menghapus Data Publication")},onError(e){l({open:!1,selectedId:null}),alert("Telah terjadi kesalahan saat Hapus Data."),console.error(e)}}),A=a.useMemo(()=>[{header:"#",accessorKey:"id"},{header:"Judul",accessorKey:"title",cell:e=>{var t;let{row:n}=e;return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:null==n?void 0:null===(t=n.original)||void 0===t?void 0:t.title})}},{header:"Photo",accessorKey:"image",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"cursor-pointer",onClick:()=>{var e;s({open:!0,image:null==t?void 0:null===(e=t.original)||void 0===e?void 0:e.image})},children:(0,r.jsx)(N.Z,{})})}},{header:"Tanggal Publikasi",accessorKey:"createdAt",cell:e=>{var t;let{row:n}=e;return Z()(null==n?void 0:null===(t=n.original)||void 0===t?void 0:t.createdAt).format("DD MMMM YYYY")}},{header:"Deskripsi",accessorKey:"description",cell:e=>{var t;let{row:n}=e;return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:500,height:200},dangerouslySetInnerHTML:{__html:null==n?void 0:null===(t=n.original)||void 0===t?void 0:t.description}})}},{header:"",accessorKey:"action",cell:e=>{let{row:t}=e,{id:n}=t.original;return(0,r.jsxs)("div",{className:"flex flex-row items-center space-x-4 text-right",children:[(0,r.jsx)(u(),{href:"/admin/publication/edit/".concat(n),children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(x.Z,{color:"blue"})})}),(0,r.jsx)(d.Z,{onClick:()=>l({open:!i.open,selectedId:n}),children:(0,r.jsx)(y.Z,{color:"red"})})]})}}],[i]),S=(0,w.Z)(t.field,100);return a.useEffect(()=>{n({...t,current:S}),k({...F,page:1})},[S]),(0,r.jsxs)("div",{className:"flex h-full flex-col gap-y-8 pt-4 md:ml-4 md:mr-0",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:flex",children:[(0,r.jsx)("div",{className:"md:flex-grow",children:(0,r.jsx)(f.Z,{name:"search",value:t.field,onChange:e=>n({...t,field:e.target.value}),fit:!e,rounded:!0})}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(u(),{href:"/admin/publication/add",children:(0,r.jsx)(o.Z,{type:"button",iconLeft:(0,r.jsx)(m.Z,{color:"white"}),rounded:!0,fit:!0,children:"Tambah Publikasi"})})})]}),(0,r.jsx)("div",{className:"flex  w-full",style:{overflow:"scroll"},children:(0,r.jsx)(h.Z,{columns:A,data:b})}),(0,r.jsx)("div",{className:"flex flex-col self-center",children:(0,r.jsx)(p.Z,{page:F.page,totalPage:F.totalPage,onPageChange:e=>k(t=>({...t,page:e}))})}),(0,r.jsx)(v.Z,{open:i.open,onOk:()=>_.mutate(i.selectedId),onCancel:()=>l({open:!1,selectedId:null})}),(0,r.jsx)(D.Z,{open:null==c?void 0:c.open,onCancel:()=>s({open:!1,image:""}),data:null==c?void 0:c.image})]})},F=n(1032),k=function(){let{NextRouter:e}=(0,F.Z)(),{data:t,status:n}=(0,c.useSession)();return"loading"===n?null:"unauthenticated"===n?(e.replace("/login"),null):"authenticated"===n&&(null==t?void 0:t.user.role)!=="admin"?(e.replace("/karyawan"),null):(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Has Law | Publication"}),(0,r.jsx)("meta",{name:"description",content:"Has Law | Publication"})]}),(0,r.jsx)(P,{})]})}}},function(e){e.O(0,[885,957,641,53,774,888,179],function(){return e(e.s=1258)}),_N_E=e.O()}]);