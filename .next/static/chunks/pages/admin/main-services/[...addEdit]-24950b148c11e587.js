(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[282],{1624:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/main-services/[...addEdit]",function(){return a(7057)}])},8545:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var i=a(5893),n=a(7294),r=a(5675),l=a.n(r),s=a(7414),c=a(3230),o=a(6527),u=a(9003),d={src:"/_next/static/media/pdf-icon.b1c4466b.jpeg",height:640,width:640,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAfEAACAAUFAAAAAAAAAAAAAAAAEQECAxIxBBUhQVH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8Aol2v3tqeFC7CmUel4ly8AAD/2Q==",blurWidth:8,blurHeight:8},m=function(e){let{name:t,value:a,accept:r,placeholder:m,onChange:v}=e,[h,p]=(0,n.useState)(void 0),f=n.useRef(null),x=e=>{let t=e.target.name,a=e.target.value,i=e.target.files;if(!i||(null==i?void 0:i.length)===0)return;let n=i[0];if(!n.type.includes("image/")&&!n.type.includes("application/pdf")){f.current&&(f.current.value="");return}(null==n?void 0:n.type)==="application/pdf"?p(n):p(void 0),null==v||v(n,{name:t,value:a})};return(0,i.jsxs)(n.Fragment,{children:[a||h?(0,i.jsxs)("div",{className:"relative",children:[h&&void 0!==h?(0,i.jsx)("div",{onClick:()=>{let e=document.createElement("a");e.href=URL.createObjectURL(h||new Blob),e.target="_blank",e.download="".concat(t,".pdf"),e.click()},children:(0,i.jsx)(l(),{className:"img-fluid flex ",src:h?d:"",alt:"Test",width:200,height:150})}):(0,i.jsx)(l(),{className:"img-fluid flex",src:a instanceof Blob?URL.createObjectURL(a):"".concat("https://has.chicodeapi.xyz","/").concat(a),alt:"Test",width:200,height:150}),(0,i.jsxs)("div",{className:"absolute top-3 flex justify-between",style:{width:"200px"},children:[(0,i.jsx)(s.Ei,{className:"mr-2",title:"Ubah Gambar",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:(0,i.jsx)(o.Z,{color:"blue",size:4})}),(0,i.jsx)(s.Ei,{title:"Hapus Gambar",onClick:()=>{var e;null==v||v(null,{name:null===(e=f.current)||void 0===e?void 0:e.name,value:""}),p(void 0)},children:(0,i.jsx)(u.Z,{color:"red",size:4})})]})]}):(0,i.jsx)(s.UP,{className:"cursor-default",iconRight:(0,i.jsx)(c.Z,{}),onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},readOnly:!0,name:t,placeholder:m}),(0,i.jsx)("input",{name:t,ref:f,type:"file",onChange:e=>{x(e)},hidden:!0,accept:r,multiple:!0})]})}},3322:function(e,t,a){"use strict";var i=a(5893);a(7294),t.Z=function(e){let{color:t="default",size:a=4}=e;return(0,i.jsx)("svg",{className:"h-".concat(a," w-").concat(a," ").concat("default"===t&&"text-inherit"," ").concat("red"===t&&"text-ui-red"," ").concat("blue"===t&&"text-ui-blue"),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 96 960 960",width:"24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M432 624v112q0 20.4 13.8 34.2Q459.6 784 480 784q20.4 0 34.2-13.8Q528 756.4 528 736V624h112q20.4 0 34.2-13.8Q688 596.4 688 576q0-20.4-13.8-34.2Q660.4 528 640 528H528V416q0-20.4-13.8-34.2Q500.4 368 480 368q-20.4 0-34.2 13.8Q432 395.6 432 416v112H320q-20.4 0-34.2 13.8Q272 555.6 272 576q0 20.4 13.8 34.2Q299.6 624 320 624h112Zm48 386q-91 0-169.987-34.084-78.988-34.083-137.417-92.512T80.084 745.987Q46 667 46 576t34.084-169.987q34.083-78.988 92.512-137.417t137.417-92.512Q389 142 480 142t169.987 34.084q78.988 34.083 137.417 92.512t92.512 137.417Q914 485 914 576t-34.084 169.987q-34.083 78.988-92.512 137.417t-137.417 92.512Q571 1010 480 1010Zm0-126q130 0 219-89t89-219q0-130-89-219t-219-89q-130 0-219 89t-89 219q0 130 89 219t219 89Zm0-308Z"})})}},2633:function(e,t,a){"use strict";var i=a(5893);a(7294),t.Z=function(e){let{color:t="default",size:a=4}=e;return(0,i.jsx)("svg",{className:"h-".concat(a," w-").concat(a," ").concat("default"===t&&"text-inherit"," ").concat("red"===t&&"text-ui-red"," ").concat("blue"===t&&"text-ui-blue"," ").concat(t),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M212-86q-53 0-89.5-36.5T86-212v-536q0-53 36.5-89.5T212-874h268v126H212v536h536v-268h126v268q0 53-36.5 89.5T748-86H212Zm207-246-87-87 329-329H560v-126h314v314H748v-101L419-332Z"})})}},3234:function(e,t,a){"use strict";var i=a(5893),n=a(7294),r=a(3600),l=a(9049),s=a(2335),c=a(9527);t.Z=function(e){var t,a;let{open:o,maskClosable:u=!0,onOk:d,onCancel:m,data:v}=e,[h,p]=(0,n.useState)(0);return(0,i.jsxs)(n.Fragment,{children:[o&&(0,i.jsx)("div",{className:"fixed inset-0 z-20 m-8 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none md:m-0",children:(0,i.jsx)("div",{className:"relative mx-auto my-6 w-auto max-w-md",children:(0,i.jsx)("div",{className:"relative flex flex-col gap-4 rounded-lg border-0 bg-white align-middle shadow-lg outline-none focus:outline-none",style:{minWidth:500},children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,i.jsx)("div",{className:"flex w-full justify-end",children:(0,i.jsx)("div",{className:"cursor-pointer",onClick:m,children:(0,i.jsx)(s.Z,{})})}),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between",children:["string"!=typeof v&&(0,i.jsx)("div",{className:"cursor-pointer",onClick:e=>{0!==h?p(h-1):null==e||e.preventDefault()},children:(0,i.jsx)(l.Z,{})}),(0,i.jsx)("div",{className:"flex items-center justify-center p-4",children:"string"==typeof v?(0,i.jsx)("img",{className:"contain flex ",style:{maxHeight:300},src:v?"".concat("https://has.chicodeapi.xyz","/").concat(v):v}):(0,i.jsx)("img",{className:"contain flex ",style:{maxHeight:300},src:v?"".concat("https://has.chicodeapi.xyz","/").concat(null==v?void 0:null===(t=v[h])||void 0===t?void 0:t.image):null==v?void 0:null===(a=v[h])||void 0===a?void 0:a.image})}),"string"!=typeof v&&(0,i.jsx)("div",{className:"cursor-pointer",onClick:e=>{h<(null==v?void 0:v.length)-1?p(h+1):null==e||e.preventDefault()},children:(0,i.jsx)(c.Z,{})})]})]})})})}),(0,i.jsx)(r.Z,{active:o,onClick:m})]})}},2291:function(e,t,a){"use strict";var i=a(7294);t.Z=function(e,t){let[a,n]=i.useState(e);return i.useEffect(()=>{let a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},1951:function(e,t,a){"use strict";a.d(t,{vt:function(){return w},FU:function(){return v},P$:function(){return g},mG:function(){return Z},i4:function(){return A},_r:function(){return o},bn:function(){return c},lM:function(){return h},Qy:function(){return S},rr:function(){return j},ef:function(){return u},IL:function(){return p},Lt:function(){return N},rP:function(){return y},$U:function(){return d},K6:function(){return f},Nm:function(){return E},hl:function(){return b},a6:function(){return m},UJ:function(){return x},gy:function(){return k}});var i=a(5121),n=a(3299),r=(()=>{let e=i.Z.create({baseURL:"https://has.chicodeapi.xyz"});return e.interceptors.request.use(async e=>{let t=await (0,n.getSession)();if(t){let a=t.user.apiToken;e.headers.Authorization="Bearer ".concat(a)}return e}),e.interceptors.response.use(e=>e,e=>{if(i.Z.isAxiosError(e)){var t;null===(t=e.response)||void 0===t||t.status}throw e}),e})(),l=a(7848),s=a(8228);let c=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetAllPartnerCategories",t],queryFn:async()=>{let{data:e}=await r.get("/v1/partner_categories/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},o=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetAllPartner",t],queryFn:async()=>{let{data:e}=await r.get("/v1/partner/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},u=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetOnePartner",t],queryFn:async()=>{let{data:e}=await r.get("/v1/partner/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},d=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.post("/v1/partner/create",e);return t},onSuccess:t,onError:a})},m=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await r.put("/v1/partner/update/".concat(t),a);return i},onSuccess:t,onError:a})},v=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.delete("/v1/partner/delete/".concat(e));return t},onSuccess:t,onError:a})},h=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetAllPublication",t],queryFn:async()=>{let{data:e}=await r.get("/v1/publications/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},p=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetOnePublication",t],queryFn:async()=>{let{data:e}=await r.get("/v1/publications/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},f=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.post("/v1/publications/create",e);return t},onSuccess:t,onError:a})},x=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await r.put("/v1/publications/update/".concat(t),a);return i},onSuccess:t,onError:a})},g=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.delete("/v1/publications/delete/".concat(e));return t},onSuccess:t,onError:a})},A=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetAllMainServices",t],queryFn:async()=>{let{data:e}=await r.get("/v1/main_services/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},j=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetOneMainServices",t],queryFn:async()=>{let{data:e}=await r.get("/v1/main_services/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},y=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.post("/v1/main_services/create",e);return t},onSuccess:t,onError:a})},b=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await r.put("/v1/main_services/update/".concat(t),a);return i},onSuccess:t,onError:a})},w=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.delete("/v1/main_services/delete/".concat(e));return t},onSuccess:t,onError:a})},S=e=>{let{id:t,params:a,onSuccess:i,onError:n}=e;return(0,l.a)({queryKey:["ApiGetAllServices",a],queryFn:async()=>{let{data:e}=await r.get("/v1/services/getall/".concat(t),{params:a});return e},keepPreviousData:!0,retry:3,onSuccess:i,onError:n})},N=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,l.a)({queryKey:["ApiGetOneServices",t],queryFn:async()=>{let{data:e}=await r.get("/v1/services/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},E=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.post("/v1/services/create",e);return t},onSuccess:t,onError:a})},k=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await r.put("/v1/services/update/".concat(t),a);return i},onSuccess:t,onError:a})},Z=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await r.delete("/v1/services/delete/".concat(e));return t},onSuccess:t,onError:a})}},2637:function(e,t,a){"use strict";function i(e,t){let a=[];for(let[i,n]of Object.entries(e)){let e=(t.page*t.size-(t.size-1)+Number(i)).toString();a.push({index:e,..."object"==typeof n?n:{}})}return a}a.d(t,{Z:function(){return i}})},7057:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var i=a(5893),n=a(7294),r=a(9008),l=a.n(r),s=a(3299),c=a(5121),o=a(2175),u=a(2783),d=a(48),m=a(1580),v=a(4398),h=a(1032),p=a(9488),f=a(1951),x=a(8545),g=a(5675),A=a.n(g),j=a(9003),y=a(7414),b=function(){var e,t,a;let{slug:r,NextRouter:l}=(0,h.Z)();(0,p.Z)();let s=r[0],g=r[1],[b,w]=(0,n.useState)(!1),[S,N]=(0,n.useState)(""),E=(0,o.TA)({initialValues:{name:"",photo:[],image:[{id:0,image:"",index:null,rowstatus:!1,main_services_id:0,createdAt:"",updatedAt:""}],deleted:[]},onSubmit:async e=>{if(/\d/.test(e.name)){alert("Nama MainServices Hanya boleh huruf");return}await C(e)}}),k=(e,t)=>{E.setFieldValue(t,e)},Z=e=>{if(!e){k("","photo");return}if(!["image/jpeg","image/png","application/pdf"].includes(e.type)){console.error("Invalid file type. Please select a valid image file.");return}let t=E.values.photo;t.push(e),console.log("cek arr",t),k(t,"photo")},D=(0,f.rr)({id:g,onSuccess(e){let{data:t}=e;E.setValues({...E.values,name:t.name,photo:null==t?void 0:t.image,image:null==t?void 0:t.image});let a=document.getElementById("editor"),i=null==t?void 0:t.description;i&&(a.innerHTML=i)},onError(e){console.error(e)}});n.useEffect(()=>{"edit"===s&&D.refetch()},[g,s]);let F=(0,f.rP)({onSuccess(){alert("Berhasil menambah Data"),l.replace("/admin/main-services"),E.setSubmitting(!1),w(!1)},onError(e){if(E.setSubmitting(!1),w(!1),c.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Menambah Data.")}console.error(e)}}),q=(0,f.hl)({onSuccess(){alert("Berhasil mengubah Data Publikasi"),l.replace("/admin/main-services"),E.setSubmitting(!1),w(!1)},onError(e){if(E.setSubmitting(!1),w(!1),c.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Mengubah Data.")}console.error(e)}}),C=async e=>{E.setSubmitting(!0),w(!0);let t=new FormData;E.values.photo.forEach((e,a)=>{t.append("photo",e,"image".concat(a+1,".png"))}),Object.entries(e).forEach(e=>{let[a,i]=e;null!=i&&("add"===s&&"image"!==a&&"deleted"!==a&&"photo"!==a&&t.set(a,i),"edit"===s&&"image"!==a&&"photo"!==a&&t.set(a,i))}),"add"===s?F.mutate(t):"edit"===s&&q.mutate({id:g,payload:t})};return(0,n.useEffect)(()=>{console.log("cek formikMainServices",null==E?void 0:E.values)},[E]),(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,i.jsx)(u.Z,{item:[{title:"Kelola Kategori Main Services",linkTo:"/admin/main-services"},{title:"add"===s?"Tambah Main Services":"Edit Main Services",active:!0}],className:"ml-4"})}),(0,i.jsx)("div",{className:"md:mx-4 md:w-3/4",children:(0,i.jsxs)("form",{className:"flex w-full flex-col gap-4",onSubmit:E.handleSubmit,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(v.Z,{htmlFor:"nama",children:["Judul Publikasi\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(m.Z,{type:"text",name:"name",placeholder:"Nama Main Services",onChange:E.handleChange,value:E.values.name,requiredMessages:"Nama Main Services tidak boleh kosong!",required:!0})]}),(0,i.jsxs)("div",{className:"w-6/12",children:[(0,i.jsxs)(v.Z,{htmlFor:"noTelp",children:["Upload Foto\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(x.Z,{name:"photo",placeholder:"Upload",value:S,accept:"image/*",onChange:e=>Z(e),required:!0}),(null==E?void 0:null===(t=E.values)||void 0===t?void 0:null===(e=t.photo)||void 0===e?void 0:e.length)>0&&(null==E?void 0:null===(a=E.values)||void 0===a?void 0:a.photo.map((e,t)=>(console.log("cek validate","object"==typeof e&&"image"in e),(0,i.jsxs)("div",{className:"my-2 flex flex-row gap-4",children:[(0,i.jsx)(A(),{className:"img-fluid flex",src:"object"==typeof e&&"image"in e?"".concat("https://has.chicodeapi.xyz","/").concat(null==e?void 0:e.image):e instanceof Blob?URL.createObjectURL(e):"".concat("https://has.chicodeapi.xyz","/").concat(e),alt:"Test",width:200,height:150}),(0,i.jsx)(y.Ei,{onClick:()=>{let a=[];E.values.photo.forEach((e,i)=>{i!==t&&a.push(e)}),console.log("cek temp",a),E.setFieldValue("photo",a),"object"==typeof e&&"id"in e&&E.values.deleted.push(null==e?void 0:e.id)},children:(0,i.jsx)(j.Z,{color:"red"})})]}))))]}),(0,i.jsx)("div",{className:"flex w-full md:flex",children:(0,i.jsx)(d.Z,{type:"submit",disabled:b,children:b?"Menyimpan...":"Simpan"})})]})})]})},w=a(2291),S=a(2637),N=a(2633),E=a(1664),k=a.n(E),Z=a(6527),D=a(3322),F=a(6696),q=a(4681),C=a(3234),_=function(e){let{main_services_id:t=""}=e,{slug:a,NextRouter:r}=(0,h.Z)(),l=(0,p.Z)(),s=a[0],c=a[1],[o,m]=n.useState({field:"",current:""}),[v,x]=n.useState({open:!1,selectedId:null}),[g,A]=n.useState({open:!1,image:""}),[b,E]=n.useState([]),[_,z]=n.useState({page:1,size:7,totalData:0,totalPage:0}),M=(0,f.Qy)({id:t,params:{page:1,pagesize:100,search:o.current,categories:"All"},onSuccess(e){let{data:t}=e,a=(0,S.Z)(t,_);E(a)},onError(e){console.error(e)}}),O=(0,f.mG)({onSuccess(){x({open:!1,selectedId:null}),alert("Berhasil menghapus Data Services")},onError(e){x({open:!1,selectedId:null}),alert("Telah terjadi kesalahan saat Hapus Data."),console.error(e)}}),T=n.useMemo(()=>[{header:"#",accessorKey:"id"},{header:"Nama",accessorKey:"name",cell:e=>{var t;let{row:a}=e;return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:null==a?void 0:null===(t=a.original)||void 0===t?void 0:t.name})}},{header:"Photo",accessorKey:"image",cell:e=>{let{row:t}=e;return(0,i.jsx)("div",{className:"cursor-pointer",onClick:()=>{var e;A({open:!0,image:null==t?void 0:null===(e=t.original)||void 0===e?void 0:e.image})},children:(0,i.jsx)(N.Z,{})})}},{header:"Deskripsi",accessorKey:"description",cell:e=>{var t;let{row:a}=e;return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:500,height:200},dangerouslySetInnerHTML:{__html:null==a?void 0:null===(t=a.original)||void 0===t?void 0:t.description}})}},{header:"",accessorKey:"action",cell:e=>{let{row:t}=e,{id:a}=t.original;return(0,i.jsxs)("div",{className:"flex flex-row items-center space-x-4 text-right",children:[(0,i.jsx)(k(),{href:"/admin/main-services/services-edit/".concat(a),children:(0,i.jsx)(y.Ei,{children:(0,i.jsx)(Z.Z,{color:"blue"})})}),(0,i.jsx)(y.Ei,{onClick:()=>x({open:!v.open,selectedId:a}),children:(0,i.jsx)(j.Z,{color:"red"})})]})}}],[v]);n.useEffect(()=>{c&&M.refetch()},[c,s]);let P=(0,w.Z)(o.field,100);return n.useEffect(()=>{m({...o,current:P}),z({..._,page:1})},[P]),(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,i.jsx)(u.Z,{item:[{title:"Kelola Kategori Main Services",linkTo:"/admin/main-services"},{title:"Kelola Services",active:!0}],className:"ml-4"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-8 pt-4 md:ml-4 md:mr-0",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:flex",children:[(0,i.jsx)("div",{className:"md:flex-grow",children:(0,i.jsx)(y.Vr,{name:"search",value:o.field,onChange:e=>m({...o,field:e.target.value}),fit:!l,rounded:!0})}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(k(),{href:"/admin/main-services/services-add/",children:(0,i.jsx)(d.Z,{type:"button",iconLeft:(0,i.jsx)(D.Z,{color:"white"}),rounded:!0,fit:!0,children:"Tambah Services"})})})]}),(0,i.jsx)("div",{children:(0,i.jsx)(q.Z,{columns:T,data:b})}),(0,i.jsx)("div",{className:"flex flex-col self-center",children:(0,i.jsx)(F.Z,{page:_.page,totalPage:_.totalPage,onPageChange:e=>z(t=>({...t,page:e}))})}),(0,i.jsx)(y.I4,{open:v.open,onOk:()=>O.mutate(v.selectedId),onCancel:()=>x({open:!1,selectedId:null})}),(0,i.jsx)(C.Z,{open:null==g?void 0:g.open,onCancel:()=>A({open:!1,image:""}),data:null==g?void 0:g.image})]})]})},z=function(e){var t;let{services_id:a="",main_services_id:r=""}=e,{slug:l,NextRouter:s}=(0,h.Z)();(0,p.Z)();let g=l[0],A=l[1],[j,y]=(0,n.useState)(!1),[b,S]=(0,n.useState)(""),[N,E]=n.useState({field:"",current:""}),[k,Z]=n.useState([]),[D,F]=n.useState({page:1,size:7,totalData:0,totalPage:0}),q=(0,o.TA)({initialValues:{name:"",photo:"",image:"",description:"",main_services_id:r},onSubmit:async e=>{if(/\d/.test(e.name)){alert("Nama Services Hanya boleh huruf");return}await P(e)}}),C=(e,t)=>{q.setFieldValue(t,e)},_=e=>{if(!e){C("","photo");return}if(!["image/jpeg","image/png","application/pdf"].includes(e.type)){console.error("Invalid file type. Please select a valid image file.");return}C(e,"photo")},z=(0,f.Lt)({id:a,onSuccess(e){let{data:t}=e;q.setValues({...q.values,name:t.name,photo:null==t?void 0:t.image,image:null==t?void 0:t.image,description:null==t?void 0:t.description,main_services_id:null==t?void 0:t.main_services_id});let a=document.getElementById("editor"),i=null==t?void 0:t.description;i&&(a.innerHTML=i)},onError(e){console.error(e)}});n.useLayoutEffect(()=>{let e=document.getElementById("editor");e.addEventListener("input",()=>{let t=e.innerHTML;null==q||q.setFieldValue("description",t)})},[]),n.useEffect(()=>{"services-edit"===g&&z.refetch()},[A,g]);let M=(0,w.Z)(N.field,100);n.useEffect(()=>{E({...N,current:M}),F({...D,page:1})},[M]);let O=(0,f.Nm)({onSuccess(){alert("Berhasil menambah Data"),s.replace("/admin/main-services/services-all/".concat(r)),q.setSubmitting(!1),y(!1)},onError(e){if(q.setSubmitting(!1),y(!1),c.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Menambah Data.")}console.error(e)}}),T=(0,f.gy)({onSuccess(){alert("Berhasil mengubah Data Services"),s.replace("/admin/main-services/services-all/".concat(r)),q.setSubmitting(!1),y(!1)},onError(e){if(q.setSubmitting(!1),y(!1),c.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Mengubah Data.")}console.error(e)}}),P=async e=>{q.setSubmitting(!0),y(!0);let t=new FormData;Object.entries(e).forEach(e=>{let[a,i]=e;null!=i&&"image"!==a&&t.set(a,i)}),"services-add"===g?O.mutate(t):"services-edit"===g&&T.mutate({id:A,payload:t})};return(0,n.useEffect)(()=>{console.log("cek formikServices",null==q?void 0:q.values)},[q]),(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,i.jsx)(u.Z,{item:[{title:"Kelola Main Services",linkTo:"/admin/main-services"},{title:"Kelola Services",linkTo:"/admin/main-services/services-all/".concat(r)},{title:"services-add"===g?"Tambah Services":"Edit Services",active:!0}],className:"ml-4"})}),(0,i.jsx)("div",{className:"md:mx-4 md:w-3/4",children:(0,i.jsxs)("form",{className:"flex w-full flex-col gap-4",onSubmit:q.handleSubmit,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(v.Z,{htmlFor:"nama",children:["Judul\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(m.Z,{type:"text",name:"name",placeholder:"Nama Services",onChange:q.handleChange,value:q.values.name,requiredMessages:"Nama Services tidak boleh kosong!",required:!0})]}),(0,i.jsxs)("div",{className:"w-6/12",children:[(0,i.jsxs)(v.Z,{htmlFor:"noTelp",children:["Upload Foto\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(x.Z,{name:"photo",placeholder:"Upload",value:null==q?void 0:null===(t=q.values)||void 0===t?void 0:t.photo,accept:"image/*",onChange:e=>_(e),required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(v.Z,{htmlFor:"noTelp",children:["Deskripsi\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)("div",{id:"editor",contentEditable:!0,style:{width:"100%",minHeight:500,border:"1px solid #ccc",padding:4,boxSizing:"border-box",backgroundColor:"white"}})]}),(0,i.jsx)("div",{className:"flex w-full md:flex",children:(0,i.jsx)(d.Z,{type:"submit",disabled:j,children:j?"Menyimpan...":"Simpan"})})]})})]})},M=a(1163),O=function(){var e;let{NextRouter:t}=(0,h.Z)(),{data:a,status:r}=(0,s.useSession)(),{query:c}=(0,M.useRouter)(),[o,u]=(0,n.useState)(""),[d,m]=(0,n.useState)(""),v=null==c?void 0:null===(e=c.addEdit)||void 0===e?void 0:e[0],p=(null==c?void 0:c.addEdit)||[];if("loading"===r)return null;if("unauthenticated"===r)return t.replace("/login"),null;if("authenticated"===r&&(null==a?void 0:a.user.role)!=="admin")return t.replace("/karyawan"),null;(0,n.useEffect)(()=>{"services-all"===v&&u(p[1]),("services-add"===v||"services-edit"===v)&&m(p[1])},[v]);let f=(0,n.useMemo)(()=>{if(console.log("cek here type",v),"add"===v||"edit"===v)return(0,i.jsx)(b,{});if(""!==o||""!==d){if("services-all"===v)return(0,i.jsx)(_,{main_services_id:o});if("services-add"===v||"services-edit"===v)return(0,i.jsx)(z,{main_services_id:o,services_id:d})}},[v,o,d]);return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:"Has Law | Main Services"}),(0,i.jsx)("meta",{name:"description",content:"Has Law | Main Services"})]}),f]})}}},function(e){e.O(0,[957,641,175,53,774,888,179],function(){return e(e.s=1624)}),_N_E=e.O()}]);