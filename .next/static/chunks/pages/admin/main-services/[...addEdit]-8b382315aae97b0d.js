(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[282],{1624:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/main-services/[...addEdit]",function(){return a(7057)}])},8545:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var i=a(5893),n=a(7294),l=a(5675),r=a.n(l),s=a(7414),o=a(3230),c=a(6527),u=a(9003),d={src:"/_next/static/media/pdf-icon.b1c4466b.jpeg",height:640,width:640,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAfEAACAAUFAAAAAAAAAAAAAAAAEQECAxIxBBUhQVH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8Aol2v3tqeFC7CmUel4ly8AAD/2Q==",blurWidth:8,blurHeight:8},v=function(e){let{name:t,value:a,accept:l,placeholder:v,onChange:m}=e,[h,p]=(0,n.useState)(void 0),f=n.useRef(null),x=e=>{let t=e.target.name,a=e.target.value,i=e.target.files;if(!i||(null==i?void 0:i.length)===0)return;let n=i[0];if(!n.type.includes("image/")&&!n.type.includes("application/pdf")){f.current&&(f.current.value="");return}(null==n?void 0:n.type)==="application/pdf"?p(n):p(void 0),null==m||m(n,{name:t,value:a})};return(0,i.jsxs)(n.Fragment,{children:[a||h?(0,i.jsxs)("div",{className:"relative",children:[h&&void 0!==h?(0,i.jsx)("div",{onClick:()=>{let e=document.createElement("a");e.href=URL.createObjectURL(h||new Blob),e.target="_blank",e.download="".concat(t,".pdf"),e.click()},children:(0,i.jsx)(r(),{className:"img-fluid flex ",src:h?d:"",alt:"Test",width:200,height:150})}):(0,i.jsx)(r(),{className:"img-fluid flex",src:a instanceof Blob?URL.createObjectURL(a):"".concat("https://has.chicodeapi.xyz","/").concat(a),alt:"Test",width:200,height:150}),(0,i.jsxs)("div",{className:"absolute top-3 flex justify-between",style:{width:"200px"},children:[(0,i.jsx)(s.Ei,{className:"mr-2",title:"Ubah Gambar",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:(0,i.jsx)(c.Z,{color:"blue",size:4})}),(0,i.jsx)(s.Ei,{title:"Hapus Gambar",onClick:()=>{var e;null==m||m(null,{name:null===(e=f.current)||void 0===e?void 0:e.name,value:""}),p(void 0)},children:(0,i.jsx)(u.Z,{color:"red",size:4})})]})]}):(0,i.jsx)(s.UP,{className:"cursor-default",iconRight:(0,i.jsx)(o.Z,{}),onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},readOnly:!0,name:t,placeholder:v}),(0,i.jsx)("input",{name:t,ref:f,type:"file",onChange:e=>{x(e)},hidden:!0,accept:l,multiple:!0})]})}},3322:function(e,t,a){"use strict";var i=a(5893);a(7294),t.Z=function(e){let{color:t="default",size:a=4}=e;return(0,i.jsx)("svg",{className:"h-".concat(a," w-").concat(a," ").concat("default"===t&&"text-inherit"," ").concat("red"===t&&"text-ui-red"," ").concat("blue"===t&&"text-ui-blue"),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 96 960 960",width:"24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M432 624v112q0 20.4 13.8 34.2Q459.6 784 480 784q20.4 0 34.2-13.8Q528 756.4 528 736V624h112q20.4 0 34.2-13.8Q688 596.4 688 576q0-20.4-13.8-34.2Q660.4 528 640 528H528V416q0-20.4-13.8-34.2Q500.4 368 480 368q-20.4 0-34.2 13.8Q432 395.6 432 416v112H320q-20.4 0-34.2 13.8Q272 555.6 272 576q0 20.4 13.8 34.2Q299.6 624 320 624h112Zm48 386q-91 0-169.987-34.084-78.988-34.083-137.417-92.512T80.084 745.987Q46 667 46 576t34.084-169.987q34.083-78.988 92.512-137.417t137.417-92.512Q389 142 480 142t169.987 34.084q78.988 34.083 137.417 92.512t92.512 137.417Q914 485 914 576t-34.084 169.987q-34.083 78.988-92.512 137.417t-137.417 92.512Q571 1010 480 1010Zm0-126q130 0 219-89t89-219q0-130-89-219t-219-89q-130 0-219 89t-89 219q0 130 89 219t219 89Zm0-308Z"})})}},2633:function(e,t,a){"use strict";var i=a(5893);a(7294),t.Z=function(e){let{color:t="default",size:a=4}=e;return(0,i.jsx)("svg",{className:"h-".concat(a," w-").concat(a," ").concat("default"===t&&"text-inherit"," ").concat("red"===t&&"text-ui-red"," ").concat("blue"===t&&"text-ui-blue"," ").concat(t),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M212-86q-53 0-89.5-36.5T86-212v-536q0-53 36.5-89.5T212-874h268v126H212v536h536v-268h126v268q0 53-36.5 89.5T748-86H212Zm207-246-87-87 329-329H560v-126h314v314H748v-101L419-332Z"})})}},3234:function(e,t,a){"use strict";var i=a(5893),n=a(7294),l=a(3600),r=a(9049),s=a(2335),o=a(9527);t.Z=function(e){var t,a;let{open:c,maskClosable:u=!0,onOk:d,onCancel:v,data:m}=e,[h,p]=(0,n.useState)(0);return(0,i.jsxs)(n.Fragment,{children:[c&&(0,i.jsx)("div",{className:"fixed inset-0 z-20 m-8 flex items-center justify-center overflow-y-auto overflow-x-hidden outline-none focus:outline-none md:m-0",children:(0,i.jsx)("div",{className:"relative mx-auto my-6 w-auto max-w-md",children:(0,i.jsx)("div",{className:"relative flex flex-col gap-4 rounded-lg border-0 bg-white align-middle shadow-lg outline-none focus:outline-none",style:{minWidth:500},children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,i.jsx)("div",{className:"flex w-full justify-end",children:(0,i.jsx)("div",{className:"cursor-pointer",onClick:v,children:(0,i.jsx)(s.Z,{})})}),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between",children:["string"!=typeof m&&(0,i.jsx)("div",{className:"cursor-pointer",onClick:e=>{0!==h?p(h-1):null==e||e.preventDefault()},children:(0,i.jsx)(r.Z,{})}),(0,i.jsx)("div",{className:"flex items-center justify-center p-4",children:"string"==typeof m?(0,i.jsx)("img",{className:"contain flex ",style:{maxHeight:300},src:m?"".concat("https://has.chicodeapi.xyz","/").concat(m):m}):(0,i.jsx)("img",{className:"contain flex ",style:{maxHeight:300},src:m?"".concat("https://has.chicodeapi.xyz","/").concat(null==m?void 0:null===(t=m[h])||void 0===t?void 0:t.image):null==m?void 0:null===(a=m[h])||void 0===a?void 0:a.image})}),"string"!=typeof m&&(0,i.jsx)("div",{className:"cursor-pointer",onClick:e=>{h<(null==m?void 0:m.length)-1?p(h+1):null==e||e.preventDefault()},children:(0,i.jsx)(o.Z,{})})]})]})})})}),(0,i.jsx)(l.Z,{active:c,onClick:v})]})}},2291:function(e,t,a){"use strict";var i=a(7294);t.Z=function(e,t){let[a,n]=i.useState(e);return i.useEffect(()=>{let a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},1951:function(e,t,a){"use strict";a.d(t,{vt:function(){return w},FU:function(){return m},P$:function(){return g},mG:function(){return Z},i4:function(){return A},_r:function(){return c},bn:function(){return o},lM:function(){return h},Qy:function(){return S},rr:function(){return y},ef:function(){return u},IL:function(){return p},Lt:function(){return k},rP:function(){return j},$U:function(){return d},K6:function(){return f},Nm:function(){return N},hl:function(){return b},a6:function(){return v},UJ:function(){return x},gy:function(){return E}});var i=a(5121),n=a(3299),l=(()=>{let e=i.Z.create({baseURL:"https://has.chicodeapi.xyz"});return e.interceptors.request.use(async e=>{let t=await (0,n.getSession)();if(t){let a=t.user.apiToken;e.headers.Authorization="Bearer ".concat(a)}return e}),e.interceptors.response.use(e=>e,e=>{if(i.Z.isAxiosError(e)){var t;null===(t=e.response)||void 0===t||t.status}throw e}),e})(),r=a(7848),s=a(8228);let o=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetAllPartnerCategories",t],queryFn:async()=>{let{data:e}=await l.get("/v1/partner_categories/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},c=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetAllPartner",t],queryFn:async()=>{let{data:e}=await l.get("/v1/partner/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},u=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetOnePartner",t],queryFn:async()=>{let{data:e}=await l.get("/v1/partner/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},d=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.post("/v1/partner/create",e);return t},onSuccess:t,onError:a})},v=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await l.put("/v1/partner/update/".concat(t),a);return i},onSuccess:t,onError:a})},m=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.delete("/v1/partner/delete/".concat(e));return t},onSuccess:t,onError:a})},h=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetAllPublication",t],queryFn:async()=>{let{data:e}=await l.get("/v1/publications/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},p=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetOnePublication",t],queryFn:async()=>{let{data:e}=await l.get("/v1/publications/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},f=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.post("/v1/publications/create",e);return t},onSuccess:t,onError:a})},x=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await l.put("/v1/publications/update/".concat(t),a);return i},onSuccess:t,onError:a})},g=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.delete("/v1/publications/delete/".concat(e));return t},onSuccess:t,onError:a})},A=e=>{let{params:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetAllMainServices",t],queryFn:async()=>{let{data:e}=await l.get("/v1/main_services/getall",{params:t});return e},keepPreviousData:!0,retry:3,onSuccess:a,onError:i})},y=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetOneMainServices",t],queryFn:async()=>{let{data:e}=await l.get("/v1/main_services/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},j=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.post("/v1/main_services/create",e);return t},onSuccess:t,onError:a})},b=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await l.put("/v1/main_services/update/".concat(t),a);return i},onSuccess:t,onError:a})},w=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.delete("/v1/main_services/delete/".concat(e));return t},onSuccess:t,onError:a})},S=e=>{let{id:t,params:a,onSuccess:i,onError:n}=e;return(0,r.a)({queryKey:["ApiGetAllServices",a],queryFn:async()=>{let{data:e}=await l.get("/v1/services/getall/".concat(t),{params:a});return e},keepPreviousData:!0,retry:3,onSuccess:i,onError:n})},k=e=>{let{id:t,onSuccess:a,onError:i}=e;return(0,r.a)({queryKey:["ApiGetOneServices",t],queryFn:async()=>{let{data:e}=await l.get("/v1/services/getdetail/".concat(t));return e},enabled:!1,onSuccess:a,onError:i})},N=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.post("/v1/services/create",e);return t},onSuccess:t,onError:a})},E=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{id:t,payload:a}=e,{data:i}=await l.put("/v1/services/update/".concat(t),a);return i},onSuccess:t,onError:a})},Z=e=>{let{onSuccess:t,onError:a}=e;return(0,s.D)({mutationFn:async e=>{let{data:t}=await l.delete("/v1/services/delete/".concat(e));return t},onSuccess:t,onError:a})}},2637:function(e,t,a){"use strict";function i(e,t){let a=[];for(let[i,n]of Object.entries(e)){let e=(t.page*t.size-(t.size-1)+Number(i)).toString();a.push({index:e,..."object"==typeof n?n:{}})}return a}a.d(t,{Z:function(){return i}})},7057:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Q}});var i=a(5893),n=a(7294),l=a(9008),r=a.n(l),s=a(3299),o=a(5121),c=a(2175),u=a(2783),d=a(48),v=a(1580),m=a(4398),h=a(1032),p=a(9488),f=a(1951),x=a(8545),g=a(5675),A=a.n(g),y=a(9003),j=a(7414),b=function(){var e,t,a;let{slug:l,NextRouter:r}=(0,h.Z)();(0,p.Z)();let s=l[0],g=l[1],[b,w]=(0,n.useState)(!1),[S,k]=(0,n.useState)(""),N=(0,c.TA)({initialValues:{name:"",photo:[],image:[{id:0,image:"",index:null,rowstatus:!1,main_services_id:0,createdAt:"",updatedAt:""}],deleted:[]},onSubmit:async e=>{if(/\d/.test(e.name)){alert("Nama MainServices Hanya boleh huruf");return}await C(e)}}),E=(e,t)=>{N.setFieldValue(t,e)},Z=e=>{if(!e){E("","photo");return}if(!["image/jpeg","image/png","application/pdf"].includes(e.type)){console.error("Invalid file type. Please select a valid image file.");return}let t=N.values.photo;t.push(e),console.log("cek arr",t),E(t,"photo")},F=(0,f.rr)({id:g,onSuccess(e){let{data:t}=e;N.setValues({...N.values,name:t.name,photo:null==t?void 0:t.image,image:null==t?void 0:t.image})},onError(e){console.error(e)}});n.useEffect(()=>{"edit"===s&&F.refetch()},[g,s]);let D=(0,f.rP)({onSuccess(){alert("Berhasil menambah Data"),r.replace("/admin/main-services"),N.setSubmitting(!1),w(!1)},onError(e){if(N.setSubmitting(!1),w(!1),o.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Menambah Data.")}console.error(e)}}),q=(0,f.hl)({onSuccess(){alert("Berhasil mengubah Data Main Services"),r.replace("/admin/main-services"),N.setSubmitting(!1),w(!1)},onError(e){if(N.setSubmitting(!1),w(!1),o.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Mengubah Data.")}console.error(e)}}),C=async e=>{var t;N.setSubmitting(!0),w(!0);let a=new FormData;if(Object.entries(e).forEach(t=>{var i,n,l;let[r,o]=t;if((null==e?void 0:e[r])==null&&(null==e?void 0:e[r])!=="")return w(!1),alert("Silahkan lengkapi data anda!");"add"===s&&("image"!==r&&"deleted"!==r&&"photo"!==r&&a.set(r,null==e?void 0:e[r]),"photo"===r&&(null==e||null===(i=e[r])||void 0===i||i.forEach((e,t)=>{a.append("photo",e,"image".concat(t+1,".png"))}))),"edit"===s&&("image"!==r&&"photo"!==r&&"deleted"!==r&&a.set(r,null==e?void 0:e[r]),"deleted"===r&&(null==e?void 0:null===(n=e[r])||void 0===n?void 0:n.length)>0&&(null==e||null===(l=e[r])||void 0===l||l.forEach((e,t)=>{a.set("deleted[".concat(t,"]"),e)}))),"photo"===r&&N.values.photo&&N.values.photo.forEach((e,t)=>{console.log("cek v",e,typeof e),(e instanceof Blob||e instanceof File)&&a.append("photo",e,"image".concat(t+1,".png"))})}),Array.isArray(t=N.values.photo)&&!t.some(e=>"string"!=typeof e&&(e instanceof File||e.image instanceof File))&&N.values.deleted.length>0)return w(!1),alert("Silahkan upload foto baru");"add"===s?D.mutate(a):"edit"===s&&q.mutate({id:g,payload:a})};return(0,n.useEffect)(()=>{console.log("cek formikMainServices",null==N?void 0:N.values)},[N]),(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,i.jsx)(u.Z,{item:[{title:"Kelola Kategori Main Services",linkTo:"/admin/main-services"},{title:"add"===s?"Tambah Main Services":"Edit Main Services",active:!0}],className:"ml-4"})}),(0,i.jsx)("div",{className:"w-full md:mx-4",style:{overflow:"scroll"},children:(0,i.jsxs)("form",{className:"flex w-full flex-col gap-4",onSubmit:N.handleSubmit,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(m.Z,{htmlFor:"nama",children:["Judul Main Services\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(v.Z,{type:"text",name:"name",placeholder:"Nama Main Services",onChange:N.handleChange,value:N.values.name,requiredMessages:"Nama Main Services tidak boleh kosong!",required:!0})]}),(0,i.jsxs)("div",{className:"w-6/12",children:[(0,i.jsxs)(m.Z,{htmlFor:"noTelp",children:["Upload Foto\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(x.Z,{name:"photo",placeholder:"Upload",value:S,accept:"image/*",onChange:e=>Z(e),required:!0}),(null==N?void 0:null===(t=N.values)||void 0===t?void 0:null===(e=t.photo)||void 0===e?void 0:e.length)>0&&(null==N?void 0:null===(a=N.values)||void 0===a?void 0:a.photo.map((e,t)=>(console.log("cek validate","object"==typeof e&&"image"in e),(0,i.jsxs)("div",{className:"my-2 flex flex-row gap-4",children:[(0,i.jsx)(A(),{className:"img-fluid flex",src:"object"==typeof e&&"image"in e?"".concat("https://has.chicodeapi.xyz","/").concat(null==e?void 0:e.image):e instanceof Blob?URL.createObjectURL(e):"".concat("https://has.chicodeapi.xyz","/").concat(e),alt:"Test",width:200,height:150}),(0,i.jsx)(j.Ei,{onClick:()=>{let a=[];N.values.photo.forEach((e,i)=>{i!==t&&a.push(e)}),console.log("cek temp",a),N.setFieldValue("photo",a),"object"==typeof e&&"id"in e&&N.values.deleted.push(null==e?void 0:e.id)},children:(0,i.jsx)(y.Z,{color:"red"})})]}))))]}),(0,i.jsx)("div",{className:"flex w-full md:flex",children:(0,i.jsx)(d.Z,{type:"submit",disabled:b,children:b?"Menyimpan...":"Simpan"})})]})})]})},w=a(2291),S=a(2637),k=a(2633),N=a(1664),E=a.n(N),Z=a(6527),F=a(3322),D=a(6696),q=a(4681),C=a(3234),_=function(e){let{main_services_id:t=""}=e,{slug:a,NextRouter:l}=(0,h.Z)(),r=(0,p.Z)(),s=a[0],o=a[1],[c,v]=n.useState({field:"",current:""}),[m,x]=n.useState({open:!1,selectedId:null}),[g,A]=n.useState({open:!1,image:""}),[b,N]=n.useState([]),[_,M]=n.useState({page:1,size:7,totalData:0,totalPage:0}),T=(0,f.Qy)({id:t,params:{page:1,pagesize:100,search:c.current,categories:"All"},onSuccess(e){let{data:t}=e,a=(0,S.Z)(t,_);N(a)},onError(e){console.error(e)}}),z=(0,f.mG)({onSuccess(){x({open:!1,selectedId:null}),alert("Berhasil menghapus Data Services")},onError(e){x({open:!1,selectedId:null}),alert("Telah terjadi kesalahan saat Hapus Data."),console.error(e)}}),O=n.useMemo(()=>[{header:"#",accessorKey:"id"},{header:"Nama",accessorKey:"name",cell:e=>{var t;let{row:a}=e;return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:null==a?void 0:null===(t=a.original)||void 0===t?void 0:t.name})}},{header:"Photo",accessorKey:"image",cell:e=>{let{row:t}=e;return(0,i.jsx)("div",{className:"cursor-pointer",onClick:()=>{var e;A({open:!0,image:null==t?void 0:null===(e=t.original)||void 0===e?void 0:e.image})},children:(0,i.jsx)(k.Z,{})})}},{header:"Deskripsi",accessorKey:"description",cell:e=>{var t;let{row:a}=e;return(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:500,height:200},dangerouslySetInnerHTML:{__html:null==a?void 0:null===(t=a.original)||void 0===t?void 0:t.description}})}},{header:"",accessorKey:"action",cell:e=>{let{row:t}=e,{id:a}=t.original;return(0,i.jsxs)("div",{className:"flex flex-row items-center space-x-4 text-right",children:[(0,i.jsx)(E(),{href:"/admin/main-services/services-edit/".concat(a),children:(0,i.jsx)(j.Ei,{children:(0,i.jsx)(Z.Z,{color:"blue"})})}),(0,i.jsx)(j.Ei,{onClick:()=>x({open:!m.open,selectedId:a}),children:(0,i.jsx)(y.Z,{color:"red"})})]})}}],[m]);n.useEffect(()=>{o&&T.refetch()},[o,s]);let B=(0,w.Z)(c.field,100);return n.useEffect(()=>{v({...c,current:B}),M({..._,page:1})},[B]),(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,i.jsx)(u.Z,{item:[{title:"Kelola Kategori Main Services",linkTo:"/admin/main-services"},{title:"Kelola Services",active:!0}],className:"ml-4"})}),(0,i.jsxs)("div",{className:"flex h-full flex-col gap-y-8 md:ml-4 md:mr-0",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:flex",children:[(0,i.jsx)("div",{className:"md:flex-grow",children:(0,i.jsx)(j.Vr,{name:"search",value:c.field,onChange:e=>v({...c,field:e.target.value}),fit:!r,rounded:!0})}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(E(),{href:"/admin/main-services/services-add/",children:(0,i.jsx)(d.Z,{type:"button",iconLeft:(0,i.jsx)(F.Z,{color:"white"}),rounded:!0,fit:!0,children:"Tambah Services"})})})]}),(0,i.jsx)("div",{className:"flex w-full",style:{overflow:"scroll"},children:(0,i.jsx)(q.Z,{columns:O,data:b})}),(0,i.jsx)("div",{className:"flex flex-col self-center",children:(0,i.jsx)(D.Z,{page:_.page,totalPage:_.totalPage,onPageChange:e=>M(t=>({...t,page:e}))})}),(0,i.jsx)(j.I4,{open:m.open,onOk:()=>z.mutate(m.selectedId),onCancel:()=>x({open:!1,selectedId:null})}),(0,i.jsx)(C.Z,{open:null==g?void 0:g.open,onCancel:()=>A({open:!1,image:""}),data:null==g?void 0:g.image})]})]})},M=a(9041);a(6973);var T=a(5490),z=a(5152),O=a.n(z);let B=O()(()=>a.e(925).then(a.t.bind(a,9521,23)).then(e=>e.Editor),{ssr:!1});var H=function(e){var t;let{services_id:a="",main_services_id:l=""}=e,{slug:r,NextRouter:s}=(0,h.Z)();(0,p.Z)();let g=r[0],A=r[1],[y,j]=(0,n.useState)(!1),[b,S]=(0,n.useState)(""),[k,N]=n.useState({field:"",current:""}),[E,Z]=n.useState([]),[F,D]=n.useState({page:1,size:7,totalData:0,totalPage:0}),q=(0,c.TA)({initialValues:{name:"",photo:"",image:"",description:"",main_services_id:l},onSubmit:async e=>{if(/\d/.test(e.name)){alert("Nama Services Hanya boleh huruf");return}await U(e)}}),[C,_]=(0,n.useState)(()=>{var e;let t=(null==q?void 0:null===(e=q.values)||void 0===e?void 0:e.description)||"",a=(0,M.convertFromHTML)(t).contentBlocks,i=M.ContentState.createFromBlockArray(a);return M.EditorState.createWithContent(i)}),z=(e,t)=>{q.setFieldValue(t,e)},O=e=>{if(!e){z("","photo");return}if(!["image/jpeg","image/png","application/pdf"].includes(e.type)){console.error("Invalid file type. Please select a valid image file.");return}z(e,"photo")},H=(0,f.Lt)({id:a,onSuccess(e){let{data:t}=e;q.setValues({...q.values,name:t.name,photo:null==t?void 0:t.image,image:null==t?void 0:t.image,description:null==t?void 0:t.description,main_services_id:null==t?void 0:t.main_services_id});let a=(null==t?void 0:t.description)||"",i=(0,M.convertFromHTML)(a).contentBlocks,n=M.ContentState.createFromBlockArray(i);_(M.EditorState.createWithContent(n))},onError(e){console.error(e)}});n.useEffect(()=>{"services-edit"===g&&H.refetch()},[A,g]);let P=(0,w.Z)(k.field,100);n.useEffect(()=>{N({...k,current:P}),D({...F,page:1})},[P]);let Q=(0,f.Nm)({onSuccess(){alert("Berhasil menambah Data"),s.replace("/admin/main-services/services-all/".concat(l)),q.setSubmitting(!1),j(!1)},onError(e){if(q.setSubmitting(!1),j(!1),o.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Menambah Data.")}console.error(e)}}),K=(0,f.gy)({onSuccess(){alert("Berhasil mengubah Data Services"),s.replace("/admin/main-services/services-all/".concat(l)),q.setSubmitting(!1),j(!1)},onError(e){if(q.setSubmitting(!1),j(!1),o.Z.isAxiosError(e)){var t,a;let i=null===(t=e.response)||void 0===t?void 0:t.status;422===i?alert(null===(a=e.response)||void 0===a?void 0:a.data.message):alert("Telah terjadi kesalahan saat Mengubah Data.")}console.error(e)}}),U=async e=>{q.setSubmitting(!0),j(!0);let t=new FormData;Object.entries(e).forEach(e=>{let[a,i]=e;null!=i&&"image"!==a&&t.set(a,i)}),"services-add"===g?Q.mutate(t):"services-edit"===g&&K.mutate({id:A,payload:t})};return(0,n.useEffect)(()=>{console.log("cek formikServices",null==q?void 0:q.values)},[q]),(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"mx-0 mb-8 hidden h-12 w-full items-center border-b-2 border-solid border-ui-gray-blue-90 md:flex",children:(0,i.jsx)(u.Z,{item:[{title:"Kelola Main Services",linkTo:"/admin/main-services"},{title:"Kelola Services",linkTo:"/admin/main-services/services-all/".concat(l)},{title:"services-add"===g?"Tambah Services":"Edit Services",active:!0}],className:"ml-4"})}),(0,i.jsx)("div",{className:"md:mx-4 md:w-3/4",children:(0,i.jsxs)("form",{className:"flex w-full flex-col gap-4",onSubmit:q.handleSubmit,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(m.Z,{htmlFor:"nama",children:["Judul\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(v.Z,{type:"text",name:"name",placeholder:"Nama Services",onChange:q.handleChange,value:q.values.name,requiredMessages:"Nama Services tidak boleh kosong!",required:!0})]}),(0,i.jsxs)("div",{className:"w-6/12",children:[(0,i.jsxs)(m.Z,{htmlFor:"noTelp",children:["Upload Foto\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(x.Z,{name:"photo",placeholder:"Upload",value:null==q?void 0:null===(t=q.values)||void 0===t?void 0:t.photo,accept:"image/*",onChange:e=>O(e),required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(m.Z,{htmlFor:"noTelp",children:["Deskripsi\xa0",(0,i.jsx)("sup",{className:"font-black text-ui-red",children:"*"})]}),(0,i.jsx)(B,{editorState:C,onEditorStateChange:e=>{_(e),console.log("cek newState",e);let t=e.getCurrentContent(),a=(0,T.E)(t);q.setFieldValue("description",a)},toolbar:{options:["inline","blockType","list","textAlign","history"],inline:{options:["bold","italic","underline","strikethrough"]},blockType:{options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote"]},list:{options:["unordered","ordered"]}},wrapperStyle:{backgroundColor:"white",maxHeight:300,overflow:"scroll"}})]}),(0,i.jsx)("div",{className:"flex w-full md:flex",children:(0,i.jsx)(d.Z,{type:"submit",disabled:y,children:y?"Menyimpan...":"Simpan"})})]})})]})},P=a(1163),Q=function(){var e;let{NextRouter:t}=(0,h.Z)(),{data:a,status:l}=(0,s.useSession)(),{query:o}=(0,P.useRouter)(),[c,u]=(0,n.useState)(""),[d,v]=(0,n.useState)(""),m=null==o?void 0:null===(e=o.addEdit)||void 0===e?void 0:e[0],p=(null==o?void 0:o.addEdit)||[];if("loading"===l)return null;if("unauthenticated"===l)return t.replace("/login"),null;if("authenticated"===l&&(null==a?void 0:a.user.role)!=="admin")return t.replace("/karyawan"),null;(0,n.useEffect)(()=>{"services-all"===m&&u(p[1]),("services-add"===m||"services-edit"===m)&&v(p[1])},[m]);let f=(0,n.useMemo)(()=>{if(console.log("cek here type",m),"add"===m||"edit"===m)return(0,i.jsx)(b,{});if(""!==c||""!==d){if("services-all"===m)return(0,i.jsx)(_,{main_services_id:c});if("services-add"===m||"services-edit"===m)return(0,i.jsx)(H,{main_services_id:c,services_id:d})}},[m,c,d]);return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:"Has Law | Main Services"}),(0,i.jsx)("meta",{name:"description",content:"Has Law | Main Services"})]}),f]})}}},function(e){e.O(0,[957,641,175,979,53,774,888,179],function(){return e(e.s=1624)}),_N_E=e.O()}]);